
<!DOCTYPE html>

<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>pyvista.utilities.fileio &#8212; PyVista 0.34.dev0 ドキュメント</title>
    
    <link href="../../../_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
  
    
    <link rel="stylesheet"
      href="../../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
    <link rel="preload" as="font" type="font/woff2" crossorigin
      href="../../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">
  
    
      
  
    
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/pydata-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/jupyter-sphinx.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/thebelab.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/no_search_highlight.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/summary.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-binder.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-dataframe.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sg_gallery-rendered-html.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
    <link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">
  
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/thebelab-helper.js"></script>
    <script src="../../../_static/translations.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.1/dist/embed-amd.js"></script>
    <link rel="index" title="索引" href="../../../genindex.html" />
    <link rel="search" title="検索" href="../../../search.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="ja">
    

    <!-- Google Analytics -->
    
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-140243896-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    

<a class="navbar-brand" href="../../../index.html">
  <img src="../../../_static/pyvista_logo_sm.png" class="logo" alt="logo">
</a>


    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../getting-started/index.html">
  はじめに
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../user-guide/index.html">
  ユーザーガイド
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../examples/index.html">
  例
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../api/index.html">
  APIリファレンス
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../../../extras/index.html">
  その他
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyvista/pyvista" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="http://slack.pyvista.org" rel="noopener" target="_blank" title="Slack Community"><span><i class="fab fa-slack"></i></span>
            <label class="sr-only">Slack Community</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyvista/pyvista/discussions" rel="noopener" target="_blank" title="Support"><span><i class="fa fa-comment fa-fw"></i></span>
            <label class="sr-only">Support</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/pyvista/pyvista/blob/main/CONTRIBUTING.rst" rel="noopener" target="_blank" title="Contributing"><span><i class="fa fa-gavel fa-fw"></i></span>
            <label class="sr-only">Contributing</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://doi.org/10.21105/joss.01450" rel="noopener" target="_blank" title="The Paper"><span><i class="fa fa-file-text fa-fw"></i></span>
            <label class="sr-only">The Paper</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar">
              <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
    
    
  </div>
</nav>
              </div>
              <div class="sidebar-end-items">
              </div>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <h1>pyvista.utilities.fileio のソースコード</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;Contains a dictionary that maps file extensions to VTK readers.&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">warnings</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="kn">import</span> <span class="nn">pyvista</span>
<span class="kn">from</span> <span class="nn">pyvista</span> <span class="kn">import</span> <span class="n">_vtk</span>

<span class="n">READERS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1"># Standard dataset readers:</span>
    <span class="s1">&#39;.vtk&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDataSetReader</span><span class="p">,</span>
    <span class="s1">&#39;.pvtk&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkPDataSetReader</span><span class="p">,</span>
    <span class="s1">&#39;.vti&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLImageDataReader</span><span class="p">,</span>
    <span class="s1">&#39;.pvti&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLPImageDataReader</span><span class="p">,</span>
    <span class="s1">&#39;.vtr&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLRectilinearGridReader</span><span class="p">,</span>
    <span class="s1">&#39;.pvtr&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLPRectilinearGridReader</span><span class="p">,</span>
    <span class="s1">&#39;.vtu&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLUnstructuredGridReader</span><span class="p">,</span>
    <span class="s1">&#39;.pvtu&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLPUnstructuredGridReader</span><span class="p">,</span>
    <span class="s1">&#39;.ply&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkPLYReader</span><span class="p">,</span>
    <span class="s1">&#39;.obj&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkOBJReader</span><span class="p">,</span>
    <span class="s1">&#39;.stl&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkSTLReader</span><span class="p">,</span>
    <span class="s1">&#39;.vtp&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLPolyDataReader</span><span class="p">,</span>
    <span class="s1">&#39;.vts&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLStructuredGridReader</span><span class="p">,</span>
    <span class="s1">&#39;.vtm&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLMultiBlockDataReader</span><span class="p">,</span>
    <span class="s1">&#39;.vtmb&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLMultiBlockDataReader</span><span class="p">,</span>
    <span class="s1">&#39;.case&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkGenericEnSightReader</span><span class="p">,</span>
    <span class="c1"># Image formats:</span>
    <span class="s1">&#39;.bmp&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkBMPReader</span><span class="p">,</span>
    <span class="s1">&#39;.dem&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDEMReader</span><span class="p">,</span>
    <span class="s1">&#39;.dcm&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDICOMImageReader</span><span class="p">,</span>
    <span class="s1">&#39;.img&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDICOMImageReader</span><span class="p">,</span>
    <span class="s1">&#39;.jpeg&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkJPEGReader</span><span class="p">,</span>
    <span class="s1">&#39;.jpg&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkJPEGReader</span><span class="p">,</span>
    <span class="s1">&#39;.mhd&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkMetaImageReader</span><span class="p">,</span>
    <span class="s1">&#39;.nrrd&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkNrrdReader</span><span class="p">,</span>
    <span class="s1">&#39;.nhdr&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkNrrdReader</span><span class="p">,</span>
    <span class="s1">&#39;.png&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkPNGReader</span><span class="p">,</span>
    <span class="s1">&#39;.pnm&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkPNMReader</span><span class="p">,</span>  <span class="c1"># TODO: not tested</span>
    <span class="s1">&#39;.slc&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkSLCReader</span><span class="p">,</span>
    <span class="s1">&#39;.tiff&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkTIFFReader</span><span class="p">,</span>
    <span class="s1">&#39;.tif&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkTIFFReader</span><span class="p">,</span>
    <span class="s1">&#39;.gltf&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkGLTFReader</span><span class="p">,</span>
    <span class="s1">&#39;.glb&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkGLTFReader</span><span class="p">,</span>
    <span class="s1">&#39;.hdr&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkHDRReader</span><span class="p">,</span>
    <span class="c1"># Other formats:</span>
    <span class="s1">&#39;.byu&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkBYUReader</span><span class="p">,</span>  <span class="c1"># TODO: not tested with this extension</span>
    <span class="s1">&#39;.g&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkBYUReader</span><span class="p">,</span>
    <span class="c1"># &#39;.chemml&#39;: _vtk.vtkCMLMoleculeReader, # TODO: not tested</span>
    <span class="c1"># &#39;.cml&#39;: _vtk.vtkCMLMoleculeReader, # vtkMolecule is not supported by pyvista</span>
    <span class="c1"># TODO: &#39;.csv&#39;: _vtk.vtkCSVReader, # vtkTables are currently not supported</span>
    <span class="s1">&#39;.facet&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkFacetReader</span><span class="p">,</span>
    <span class="s1">&#39;.cas&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkFLUENTReader</span><span class="p">,</span>  <span class="c1"># TODO: not tested</span>
    <span class="c1"># &#39;.dat&#39;: _vtk.vtkFLUENTReader, # TODO: not working</span>
    <span class="c1"># &#39;.cube&#39;: _vtk.vtkGaussianCubeReader, # Contains `atom_types` which are note supported?</span>
    <span class="s1">&#39;.res&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkMFIXReader</span><span class="p">,</span>  <span class="c1"># TODO: not tested</span>
    <span class="s1">&#39;.foam&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkOpenFOAMReader</span><span class="p">,</span>
    <span class="c1"># &#39;.pdb&#39;: _vtk.vtkPDBReader, # Contains `atom_types` which are note supported?</span>
    <span class="s1">&#39;.p3d&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkPlot3DMetaReader</span><span class="p">,</span>
    <span class="s1">&#39;.pts&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkPTSReader</span><span class="p">,</span>
    <span class="c1"># &#39;.particles&#39;: _vtk.vtkParticleReader, # TODO: not tested</span>
    <span class="c1"># TODO: &#39;.pht&#39;: _vtk.vtkPhasta??????,</span>
    <span class="c1"># TODO: &#39;.vpc&#39;: _vtk.vtkVPIC?????,</span>
    <span class="c1"># &#39;.bin&#39;: _vtk.lazy_vtkMultiBlockPLOT3DReader,# TODO: non-default routine</span>
    <span class="s1">&#39;.tri&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkMCubesReader</span><span class="p">,</span>
    <span class="s1">&#39;.inp&#39;</span><span class="p">:</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkAVSucdReader</span><span class="p">,</span>
<span class="p">}</span>

<span class="n">VTK_MAJOR</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkVersion</span><span class="p">()</span><span class="o">.</span><span class="n">GetVTKMajorVersion</span><span class="p">()</span>
<span class="n">VTK_MINOR</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkVersion</span><span class="p">()</span><span class="o">.</span><span class="n">GetVTKMinorVersion</span><span class="p">()</span>

<span class="k">if</span> <span class="n">VTK_MAJOR</span> <span class="o">&gt;=</span> <span class="mi">8</span> <span class="ow">and</span> <span class="n">VTK_MINOR</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">READERS</span><span class="p">[</span><span class="s1">&#39;.sgy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkSegYReader</span>
        <span class="n">READERS</span><span class="p">[</span><span class="s1">&#39;.segy&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkSegYReader</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="k">pass</span>


<span class="k">def</span> <span class="nf">_get_ext_force</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">force_ext</span><span class="p">:</span>
        <span class="k">return</span> <span class="nb">str</span><span class="p">(</span><span class="n">force_ext</span><span class="p">)</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">get_ext</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">get_ext</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Extract the extension of the filename.&quot;&quot;&quot;</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">ext</span>


<span class="k">def</span> <span class="nf">get_vtk_reader</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Get the corresponding reader based on file extension and instantiates it.&quot;&quot;&quot;</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">_get_ext_force</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="n">force_ext</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">READERS</span><span class="p">[</span><span class="n">ext</span><span class="p">]()</span>  <span class="c1"># Get and instantiate the reader</span>


<span class="k">def</span> <span class="nf">set_vtkwriter_mode</span><span class="p">(</span><span class="n">vtk_writer</span><span class="p">,</span> <span class="n">use_binary</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Set any vtk writer to write as binary or ascii.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vtk_writer</span><span class="p">,</span> <span class="p">(</span><span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDataWriter</span><span class="p">,</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkPLYWriter</span><span class="p">,</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkSTLWriter</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">use_binary</span><span class="p">:</span>
            <span class="n">vtk_writer</span><span class="o">.</span><span class="n">SetFileTypeToBinary</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vtk_writer</span><span class="o">.</span><span class="n">SetFileTypeToASCII</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">vtk_writer</span><span class="p">,</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkXMLWriter</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">use_binary</span><span class="p">:</span>
            <span class="n">vtk_writer</span><span class="o">.</span><span class="n">SetDataModeToBinary</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">vtk_writer</span><span class="o">.</span><span class="n">SetDataModeToAscii</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">vtk_writer</span>


<span class="k">def</span> <span class="nf">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Use a given reader in the common VTK reading pipeline routine.</span>

<span class="sd">    The reader must come from the ``READERS`` mapping.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    reader : vtkReader</span>
<span class="sd">        Any instantiated VTK reader class</span>

<span class="sd">    filename : str</span>
<span class="sd">        The string filename to the data file to read.</span>

<span class="sd">    attrs : dict, optional</span>
<span class="sd">        A dictionary of attributes to call on the reader. Keys of</span>
<span class="sd">        dictionary are the attribute/method names and values are the</span>
<span class="sd">        arguments passed to those calls. If you do not have any</span>
<span class="sd">        attributes to call, pass ``None`` as the value.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">observer</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">utilities</span><span class="o">.</span><span class="n">errors</span><span class="o">.</span><span class="n">Observer</span><span class="p">()</span>
    <span class="n">observer</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">reader</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">attrs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">attrs</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s1">&#39;Attributes must be a dictionary of name and arguments.&#39;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">SetCaseFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># Apply any attributes listed</span>
    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">attrs</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="n">attr</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">args</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
                <span class="n">args</span> <span class="o">=</span> <span class="p">[</span><span class="n">args</span><span class="p">]</span>
            <span class="n">attr</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">attr</span><span class="p">()</span>
    <span class="c1"># Perform the read</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>

    <span class="c1"># Check reader for errors</span>
    <span class="k">if</span> <span class="n">observer</span><span class="o">.</span><span class="n">has_event_occurred</span><span class="p">():</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;The VTK reader `</span><span class="si">{</span><span class="n">reader</span><span class="o">.</span><span class="n">GetClassName</span><span class="p">()</span><span class="si">}</span><span class="s1">` raised an error while reading the file.</span><span class="se">\n</span><span class="s1">&#39;</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">&quot;</span><span class="si">{</span><span class="n">observer</span><span class="o">.</span><span class="n">get_message</span><span class="p">()</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
        <span class="p">)</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">GetOutputDataObject</span><span class="p">(</span><span class="mi">0</span><span class="p">))</span>
    <span class="n">data</span><span class="o">.</span><span class="n">_post_file_load_processing</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">data</span>


<div class="viewcode-block" id="read_legacy"><a class="viewcode-back" href="../../../api/utilities/_autosummary/pyvista.read_legacy.html#pyvista.read_legacy">[ドキュメント]</a><span class="k">def</span> <span class="nf">read_legacy</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Use VTK&#39;s legacy reader to read a file.</span>

<span class="sd">    This uses ``vtk.vtkDataSetReader`` to read the data.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The string path to the file to read.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyvista.DataSet</span>
<span class="sd">        Wrapped pyvista mesh.</span>

<span class="sd">    Notes</span>
<span class="sd">    -----</span>
<span class="sd">    Normally, you should use :func:`pyvista.read` to read in meshes</span>
<span class="sd">    from file, and this reader will automatically used for ``&#39;.vtk&#39;``</span>
<span class="sd">    and ``&#39;.pvtk&#39;`` files.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Load an example mesh using the legacy reader.</span>

<span class="sd">    &gt;&gt;&gt; import pyvista</span>
<span class="sd">    &gt;&gt;&gt; from pyvista import examples</span>
<span class="sd">    &gt;&gt;&gt; mesh = pyvista.read_legacy(examples.uniformfile)</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">vtkDataSetReader</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="c1"># Ensure all data is fetched with poorly formatted legacy files</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllScalarsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllColorScalarsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllNormalsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllTCoordsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllVectorsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllFieldsOn</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">ReadAllTensorsOn</span><span class="p">()</span>

    <span class="c1"># Perform the read</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s1">&#39;No output when using VTKs legacy reader&#39;</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span></div>


<div class="viewcode-block" id="read"><a class="viewcode-back" href="../../../api/utilities/_autosummary/pyvista.read.html#pyvista.read">[ドキュメント]</a><span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read any file type supported by ``vtk`` or ``meshio``.</span>

<span class="sd">    Automatically determines the correct reader to use then wraps the</span>
<span class="sd">    corresponding mesh as a pyvista object.  Attempts native ``vtk``</span>
<span class="sd">    readers first then tries to use ``meshio``.</span>

<span class="sd">    Supports the following formats:</span>

<span class="sd">    Standard dataset readers:</span>

<span class="sd">    * ``&#39;.vtk&#39;``</span>
<span class="sd">    * ``&#39;.pvtk&#39;``</span>
<span class="sd">    * ``&#39;.vti&#39;``</span>
<span class="sd">    * ``&#39;.pvti&#39;``</span>
<span class="sd">    * ``&#39;.vtr&#39;``</span>
<span class="sd">    * ``&#39;.pvtr&#39;``</span>
<span class="sd">    * ``&#39;.vtu&#39;``</span>
<span class="sd">    * ``&#39;.pvtu&#39;``</span>
<span class="sd">    * ``&#39;.ply&#39;``</span>
<span class="sd">    * ``&#39;.obj&#39;``</span>
<span class="sd">    * ``&#39;.stl&#39;``</span>
<span class="sd">    * ``&#39;.vtp&#39;``</span>
<span class="sd">    * ``&#39;.vts&#39;``</span>
<span class="sd">    * ``&#39;.vtm&#39;``</span>
<span class="sd">    * ``&#39;.vtmb&#39;``</span>
<span class="sd">    * ``&#39;.case&#39;``</span>

<span class="sd">    Image formats:</span>

<span class="sd">    * ``&#39;.bmp&#39;``</span>
<span class="sd">    * ``&#39;.dem&#39;``</span>
<span class="sd">    * ``&#39;.dcm&#39;``</span>
<span class="sd">    * ``&#39;.img&#39;``</span>
<span class="sd">    * ``&#39;.jpeg&#39;``</span>
<span class="sd">    * ``&#39;.jpg&#39;``</span>
<span class="sd">    * ``&#39;.mhd&#39;``</span>
<span class="sd">    * ``&#39;.nrrd&#39;``</span>
<span class="sd">    * ``&#39;.nhdr&#39;``</span>
<span class="sd">    * ``&#39;.png&#39;``</span>
<span class="sd">    * ``&#39;.pnm&#39;``</span>
<span class="sd">    * ``&#39;.slc&#39;``</span>
<span class="sd">    * ``&#39;.tiff&#39;``</span>
<span class="sd">    * ``&#39;.tif&#39;``</span>

<span class="sd">    Other formats:</span>

<span class="sd">    * ``&#39;.byu&#39;``</span>
<span class="sd">    * ``&#39;.g&#39;``</span>
<span class="sd">    * ``&#39;.p3d&#39;``</span>
<span class="sd">    * ``&#39;.pts&#39;``</span>
<span class="sd">    * ``&#39;.tri&#39;``</span>
<span class="sd">    * ``&#39;.inp&#39;``</span>

<span class="sd">    .. note::</span>
<span class="sd">       There is limited support for OpenFoam format files.</span>
<span class="sd">       ``pyvista.read`` will automatically return only the first</span>
<span class="sd">       dataset in a single-element :class:`pyvista.MultiBlock`.  These</span>
<span class="sd">       files include:</span>

<span class="sd">       * ``&#39;.facet&#39;``</span>
<span class="sd">       * ``&#39;.cas&#39;``</span>
<span class="sd">       * ``&#39;.res&#39;``</span>
<span class="sd">       * ``&#39;.foam&#39;``</span>

<span class="sd">    .. note::</span>
<span class="sd">       See https://github.com/nschloe/meshio for formats supported by</span>
<span class="sd">       ``meshio``. Be sure to install ``meshio`` with ``pip install</span>
<span class="sd">       meshio`` if you wish to use it.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The string path to the file to read. If a list of files is</span>
<span class="sd">        given, a :class:`pyvista.MultiBlock` dataset is returned with</span>
<span class="sd">        each file being a separate block in the dataset.</span>

<span class="sd">    attrs : dict, optional</span>
<span class="sd">        A dictionary of attributes to call on the reader. Keys of</span>
<span class="sd">        dictionary are the attribute/method names and values are the</span>
<span class="sd">        arguments passed to those calls. If you do not have any</span>
<span class="sd">        attributes to call, pass ``None`` as the value.</span>

<span class="sd">    force_ext : str, optional</span>
<span class="sd">        If specified, the reader will be chosen by an extension which</span>
<span class="sd">        is different to its actual extension. For example, ``&#39;.vts&#39;``,</span>
<span class="sd">        ``&#39;.vtu&#39;``.</span>

<span class="sd">    file_format : str, optional</span>
<span class="sd">        Format of file to read with meshio.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyvista.DataSet</span>
<span class="sd">        Wrapped PyVista dataset.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Load an example mesh.</span>

<span class="sd">    &gt;&gt;&gt; import pyvista</span>
<span class="sd">    &gt;&gt;&gt; from pyvista import examples</span>
<span class="sd">    &gt;&gt;&gt; mesh = pyvista.read(examples.antfile)</span>
<span class="sd">    &gt;&gt;&gt; mesh.plot(cpos=&#39;xz&#39;)</span>

<span class="sd">    Load a vtk file.</span>

<span class="sd">    &gt;&gt;&gt; mesh = pyvista.read(&#39;my_mesh.vtk&#39;)  # doctest:+SKIP</span>

<span class="sd">    Load a meshio file.</span>

<span class="sd">    &gt;&gt;&gt; mesh = pyvista.read(&quot;mesh.obj&quot;)  # doctest:+SKIP</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">file_format</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">force_ext</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;Only one of `file_format` and `force_ext` may be specified.&#39;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">)):</span>
        <span class="n">multi</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">MultiBlock</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">each</span> <span class="ow">in</span> <span class="n">filename</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">each</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">name</span> <span class="o">=</span> <span class="kc">None</span>
            <span class="n">multi</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="n">each</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="n">file_format</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">multi</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;File (</span><span class="si">{</span><span class="n">filename</span><span class="si">}</span><span class="s1">) not found&#39;</span><span class="p">)</span>

    <span class="n">ext</span> <span class="o">=</span> <span class="n">_get_ext_force</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="p">)</span>

    <span class="c1"># Read file using meshio.read if file_format is present</span>
    <span class="k">if</span> <span class="n">file_format</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">read_meshio</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>

    <span class="c1"># From the extension, decide which reader to use</span>
    <span class="k">if</span> <span class="n">attrs</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">get_vtk_reader</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="n">ext</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;.e&#39;</span><span class="p">,</span> <span class="s1">&#39;.exo&#39;</span><span class="p">]:</span>
        <span class="k">return</span> <span class="n">read_exodus</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;.vtk&#39;</span><span class="p">]:</span>
        <span class="c1"># Attempt to use the legacy reader...</span>
        <span class="k">return</span> <span class="n">read_legacy</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># Attempt find a reader in the readers mapping</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">reader</span> <span class="o">=</span> <span class="n">get_vtk_reader</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">force_ext</span><span class="o">=</span><span class="n">ext</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">KeyError</span><span class="p">:</span>
            <span class="c1"># Don&#39;t fall back to meshio if using `force_ext`, which is really</span>
            <span class="c1"># just intended to be used with the native PyVista readers</span>
            <span class="k">if</span> <span class="n">force_ext</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">meshio._exceptions</span> <span class="kn">import</span> <span class="n">ReadError</span>

                <span class="k">raise</span> <span class="n">ReadError</span>
            <span class="c1"># Attempt read with meshio</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">from</span> <span class="nn">meshio._exceptions</span> <span class="kn">import</span> <span class="n">ReadError</span>

                <span class="k">try</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">read_meshio</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">ReadError</span><span class="p">:</span>
                    <span class="k">pass</span>
            <span class="k">except</span> <span class="ne">SyntaxError</span><span class="p">:</span>
                <span class="c1"># https://github.com/pyvista/pyvista/pull/495</span>
                <span class="k">pass</span>

    <span class="k">raise</span> <span class="ne">IOError</span><span class="p">(</span><span class="s2">&quot;This file was not able to be automatically read by pyvista.&quot;</span><span class="p">)</span></div>


<div class="viewcode-block" id="read_texture"><a class="viewcode-back" href="../../../api/utilities/_autosummary/pyvista.read_texture.html#pyvista.read_texture">[ドキュメント]</a><span class="k">def</span> <span class="nf">read_texture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Load a texture from an image file.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path of the texture file to read.</span>

<span class="sd">    attrs : dict, optional</span>
<span class="sd">        A dictionary of attributes to call on the reader. Keys of</span>
<span class="sd">        dictionary are the attribute/method names and values are the</span>
<span class="sd">        arguments passed to those calls. If you do not have any</span>
<span class="sd">        attributes to call, pass ``None`` as the value.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyvista.Texture</span>
<span class="sd">        PyVista texture object.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Read in an example jpg map file as a texture.</span>

<span class="sd">    &gt;&gt;&gt; import os</span>
<span class="sd">    &gt;&gt;&gt; import pyvista</span>
<span class="sd">    &gt;&gt;&gt; from pyvista import examples</span>
<span class="sd">    &gt;&gt;&gt; os.path.basename(examples.mapfile)</span>
<span class="sd">    &#39;2k_earth_daymap.jpg&#39;</span>
<span class="sd">    &gt;&gt;&gt; texture = pyvista.read_texture(examples.mapfile)</span>
<span class="sd">    &gt;&gt;&gt; type(texture)</span>
<span class="sd">    &lt;class &#39;pyvista.core.objects.Texture&#39;&gt;</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># initialize the reader using the extension to find it</span>
        <span class="n">reader</span> <span class="o">=</span> <span class="n">get_vtk_reader</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">n_points</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;Problem reading the image with VTK.&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">Texture</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span><span class="ne">KeyError</span><span class="p">,</span> <span class="ne">ValueError</span><span class="p">):</span>
        <span class="c1"># Otherwise, use the imageio reader</span>
        <span class="k">pass</span>
    <span class="kn">import</span> <span class="nn">imageio</span>

    <span class="k">return</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">Texture</span><span class="p">(</span><span class="n">imageio</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="n">filename</span><span class="p">))</span></div>


<div class="viewcode-block" id="read_exodus"><a class="viewcode-back" href="../../../api/utilities/_autosummary/pyvista.read_exodus.html#pyvista.read_exodus">[ドキュメント]</a><span class="k">def</span> <span class="nf">read_exodus</span><span class="p">(</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">animate_mode_shapes</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">apply_displacements</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">displacement_magnitude</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">read_point_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">read_cell_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">enabled_sidesets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
<span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read an ExodusII file (``&#39;.e&#39;`` or ``&#39;.exo&#39;``).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The path to the exodus file to read.</span>

<span class="sd">    animate_mode_shapes : bool, optional</span>
<span class="sd">        When ``True`` then this reader will report a continuous time</span>
<span class="sd">        range [0,1] and animate the displacements in a periodic</span>
<span class="sd">        sinusoid.</span>

<span class="sd">    apply_displacements : bool, optional</span>
<span class="sd">        Geometric locations can include displacements. When ``True``,</span>
<span class="sd">        the nodal positions are &#39;displaced&#39; by the standard exodus</span>
<span class="sd">        displacement vector. If displacements are turned off, the user</span>
<span class="sd">        can explicitly add them by applying a warp filter.</span>

<span class="sd">    displacement_magnitude : bool, optional</span>
<span class="sd">        This is a number between 0 and 1 that is used to scale the</span>
<span class="sd">        ``DisplacementMagnitude`` in a sinusoidal pattern.</span>

<span class="sd">    read_point_data : bool, optional</span>
<span class="sd">        Read in data associated with points.  Default ``True``.</span>

<span class="sd">    read_cell_data : bool, optional</span>
<span class="sd">        Read in data associated with cells.  Default ``True``.</span>

<span class="sd">    enabled_sidesets : str or int, optional</span>
<span class="sd">        The name of the array that store the mapping from side set</span>
<span class="sd">        cells back to the global id of the elements they bound.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyvista.DataSet</span>
<span class="sd">        Wrapped PyVista dataset.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    &gt;&gt;&gt; import pyvista as pv</span>
<span class="sd">    &gt;&gt;&gt; from pyvista import examples</span>
<span class="sd">    &gt;&gt;&gt; data = read_exodus(&#39;mymesh.exo&#39;)  # doctest:+SKIP</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># lazy import here to avoid loading module on import pyvista</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">vtkmodules.vtkIOExodus</span> <span class="kn">import</span> <span class="n">vtkExodusIIReader</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">vtk</span> <span class="kn">import</span> <span class="n">vtkExodusIIReader</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">vtkExodusIIReader</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">UpdateInformation</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetAnimateModeShapes</span><span class="p">(</span><span class="n">animate_mode_shapes</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetApplyDisplacements</span><span class="p">(</span><span class="n">apply_displacements</span><span class="p">)</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetDisplacementMagnitude</span><span class="p">(</span><span class="n">displacement_magnitude</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">read_point_data</span><span class="p">:</span>  <span class="c1"># read in all point data variables</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">SetAllArrayStatus</span><span class="p">(</span><span class="n">vtkExodusIIReader</span><span class="o">.</span><span class="n">NODAL</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">read_cell_data</span><span class="p">:</span>  <span class="c1"># read in all cell data variables</span>
        <span class="n">reader</span><span class="o">.</span><span class="n">SetAllArrayStatus</span><span class="p">(</span><span class="n">vtkExodusIIReader</span><span class="o">.</span><span class="n">ELEM_BLOCK</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">enabled_sidesets</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">enabled_sidesets</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">GetNumberOfSideSetArrays</span><span class="p">()))</span>

    <span class="k">for</span> <span class="n">sideset</span> <span class="ow">in</span> <span class="n">enabled_sidesets</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sideset</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">GetSideSetArrayName</span><span class="p">(</span><span class="n">sideset</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">sideset</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">sideset</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Could not parse sideset ID/name: </span><span class="si">{</span><span class="n">sideset</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

        <span class="n">reader</span><span class="o">.</span><span class="n">SetSideSetArrayStatus</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

    <span class="n">reader</span><span class="o">.</span><span class="n">Update</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">wrap</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">GetOutput</span><span class="p">())</span></div>


<span class="k">def</span> <span class="nf">read_plot3d</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">q_filenames</span><span class="o">=</span><span class="p">(),</span> <span class="n">auto_detect</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read a Plot3D grid file (e.g., grid.in) and optional q file(s).</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        The string filename to the data file to read.</span>

<span class="sd">    q_filenames : str or tuple(str), optional</span>
<span class="sd">        The string filename of the q-file, or iterable of such</span>
<span class="sd">        filenames.</span>

<span class="sd">    auto_detect : bool, optional</span>
<span class="sd">        When this option is turned on, the reader will try to figure</span>
<span class="sd">        out the values of various options such as byte order, byte</span>
<span class="sd">        count etc. Default is ``True``.</span>

<span class="sd">    attrs : dict, optional</span>
<span class="sd">        A dictionary of attributes to call on the reader. Keys of</span>
<span class="sd">        dictionary are the attribute/method names and values are the</span>
<span class="sd">        arguments passed to those calls. If you do not have any</span>
<span class="sd">        attributes to call, pass ``None`` as the value.</span>

<span class="sd">    Returns</span>
<span class="sd">    -------</span>
<span class="sd">    pyvista.MultiBlock</span>
<span class="sd">        Data read from the file.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">_process_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="n">reader</span> <span class="o">=</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">lazy_vtkMultiBlockPLOT3DReader</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">SetFileName</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>

    <span class="c1"># q_filenames may be a list or a single filename</span>
    <span class="k">if</span> <span class="n">q_filenames</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">q_filenames</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">)):</span>
            <span class="n">q_filenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">q_filenames</span><span class="p">]</span>
    <span class="n">q_filenames</span> <span class="o">=</span> <span class="p">[</span><span class="n">_process_filename</span><span class="p">(</span><span class="n">f</span><span class="p">)</span> <span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">q_filenames</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="s1">&#39;AddFileName&#39;</span><span class="p">):</span>
        <span class="c1"># AddFileName was added to vtkMultiBlockPLOT3DReader sometime around</span>
        <span class="c1"># VTK 8.2. This method supports reading multiple q files.</span>
        <span class="k">for</span> <span class="n">q_filename</span> <span class="ow">in</span> <span class="n">q_filenames</span><span class="p">:</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">AddFileName</span><span class="p">(</span><span class="n">q_filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="c1"># SetQFileName is used to add a single q file to be read, and is still</span>
        <span class="c1"># supported in VTK9.</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">q_filenames</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">q_filenames</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                    <span class="s1">&#39;Reading of multiple q files is not supported with this version of VTK.&#39;</span>
                <span class="p">)</span>
            <span class="n">reader</span><span class="o">.</span><span class="n">SetQFileName</span><span class="p">(</span><span class="n">q_filenames</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">attrs</span> <span class="o">=</span> <span class="p">{}</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">attrs</span> <span class="k">else</span> <span class="n">attrs</span>
    <span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;SetAutoDetectFormat&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">auto_detect</span>

    <span class="k">return</span> <span class="n">standard_reader_routine</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attrs</span><span class="o">=</span><span class="n">attrs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">from_meshio</span><span class="p">(</span><span class="n">mesh</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Convert a ``meshio`` mesh instance to a PyVista mesh.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>  <span class="c1"># meshio&lt;5.0 compatibility</span>
        <span class="kn">from</span> <span class="nn">meshio.vtk._vtk</span> <span class="kn">import</span> <span class="n">meshio_to_vtk_type</span><span class="p">,</span> <span class="n">vtk_type_to_numnodes</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="kn">from</span> <span class="nn">meshio._vtk_common</span> <span class="kn">import</span> <span class="n">meshio_to_vtk_type</span>
        <span class="kn">from</span> <span class="nn">meshio.vtk._vtk_42</span> <span class="kn">import</span> <span class="n">vtk_type_to_numnodes</span>

    <span class="c1"># Extract cells from meshio.Mesh object</span>
    <span class="n">offset</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">cell_type</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">next_offset</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">mesh</span><span class="o">.</span><span class="n">cells</span><span class="p">:</span>
        <span class="n">vtk_type</span> <span class="o">=</span> <span class="n">meshio_to_vtk_type</span><span class="p">[</span><span class="n">c</span><span class="o">.</span><span class="n">type</span><span class="p">]</span>
        <span class="n">numnodes</span> <span class="o">=</span> <span class="n">vtk_type_to_numnodes</span><span class="p">[</span><span class="n">vtk_type</span><span class="p">]</span>
        <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">np</span><span class="o">.</span><span class="n">full</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">),</span> <span class="mi">1</span><span class="p">),</span> <span class="n">numnodes</span><span class="p">),</span> <span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">))</span><span class="o">.</span><span class="n">ravel</span><span class="p">())</span>
        <span class="n">cell_type</span> <span class="o">+=</span> <span class="p">[</span><span class="n">vtk_type</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">VTK9</span><span class="p">:</span>
            <span class="n">offset</span> <span class="o">+=</span> <span class="p">[</span><span class="n">next_offset</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">numnodes</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="o">.</span><span class="n">data</span><span class="p">))]</span>
            <span class="n">next_offset</span> <span class="o">=</span> <span class="n">offset</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">numnodes</span> <span class="o">+</span> <span class="mi">1</span>

    <span class="c1"># Extract cell data from meshio.Mesh object</span>
    <span class="n">cell_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mesh</span><span class="o">.</span><span class="n">cell_data</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

    <span class="c1"># Create pyvista.UnstructuredGrid object</span>
    <span class="n">points</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">points</span>
    <span class="k">if</span> <span class="n">points</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hstack</span><span class="p">((</span><span class="n">points</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">),</span> <span class="mi">1</span><span class="p">))))</span>

    <span class="k">if</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">VTK9</span><span class="p">:</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">UnstructuredGrid</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">cells</span><span class="p">),</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cell_type</span><span class="p">),</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">grid</span> <span class="o">=</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">UnstructuredGrid</span><span class="p">(</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">offset</span><span class="p">),</span>
            <span class="n">np</span><span class="o">.</span><span class="n">concatenate</span><span class="p">(</span><span class="n">cells</span><span class="p">),</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">cell_type</span><span class="p">),</span>
            <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">points</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">),</span>
        <span class="p">)</span>

    <span class="c1"># Set point data</span>
    <span class="n">grid</span><span class="o">.</span><span class="n">point_data</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="n">k</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">float64</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mesh</span><span class="o">.</span><span class="n">point_data</span><span class="o">.</span><span class="n">items</span><span class="p">()})</span>

    <span class="c1"># Set cell data</span>
    <span class="n">grid</span><span class="o">.</span><span class="n">cell_data</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">cell_data</span><span class="p">)</span>

    <span class="c1"># Call datatype-specific post-load processing</span>
    <span class="n">grid</span><span class="o">.</span><span class="n">_post_file_load_processing</span><span class="p">()</span>

    <span class="k">return</span> <span class="n">grid</span>


<span class="k">def</span> <span class="nf">read_meshio</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Read any mesh file using meshio.&quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">meshio</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;To use this feature install meshio with:</span><span class="se">\n\n</span><span class="s2">pip install meshio&quot;</span><span class="p">)</span>

    <span class="c1"># Make sure relative paths will work</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
    <span class="c1"># Read mesh file</span>
    <span class="n">mesh</span> <span class="o">=</span> <span class="n">meshio</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">file_format</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">from_meshio</span><span class="p">(</span><span class="n">mesh</span><span class="p">)</span>


<div class="viewcode-block" id="save_meshio"><a class="viewcode-back" href="../../../api/utilities/_autosummary/pyvista.save_meshio.html#pyvista.save_meshio">[ドキュメント]</a><span class="k">def</span> <span class="nf">save_meshio</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">mesh</span><span class="p">,</span> <span class="n">file_format</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Save mesh to file using meshio.</span>

<span class="sd">    Parameters</span>
<span class="sd">    ----------</span>
<span class="sd">    filename : str</span>
<span class="sd">        Filename to save the mesh to.</span>

<span class="sd">    mesh : pyvista.DataSet</span>
<span class="sd">        Any PyVista mesh/spatial data type.</span>

<span class="sd">    file_format : str, optional</span>
<span class="sd">        File type for meshio to save.  For example ``&#39;.bdf&#39;``.  This</span>
<span class="sd">        is normally inferred from the extension but this can be</span>
<span class="sd">        overridden.</span>

<span class="sd">    **kwargs : dict, optional</span>
<span class="sd">        Additional keyword arguments.  See</span>
<span class="sd">        ``meshio.write_points_cells`` for more details.</span>

<span class="sd">    Examples</span>
<span class="sd">    --------</span>
<span class="sd">    Save a pyvista sphere to a Abaqus data file.</span>

<span class="sd">    &gt;&gt;&gt; import pyvista</span>
<span class="sd">    &gt;&gt;&gt; sphere = pyvista.Sphere()</span>
<span class="sd">    &gt;&gt;&gt; pyvista.save_meshio(&#39;mymesh.inp&#39;, sphere)  # doctest:+SKIP</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">meshio</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>  <span class="c1"># pragma: no cover</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span><span class="s2">&quot;To use this feature install meshio with:</span><span class="se">\n\n</span><span class="s2">pip install meshio&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>  <span class="c1"># for meshio&lt;5.0 compatibility</span>
        <span class="kn">from</span> <span class="nn">meshio.vtk._vtk</span> <span class="kn">import</span> <span class="n">vtk_to_meshio_type</span>
    <span class="k">except</span><span class="p">:</span>  <span class="c1"># noqa: E722 pragma: no cover</span>
        <span class="kn">from</span> <span class="nn">meshio._vtk_common</span> <span class="kn">import</span> <span class="n">vtk_to_meshio_type</span>

    <span class="c1"># Make sure relative paths will work</span>
    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>

    <span class="c1"># Cast to pyvista.UnstructuredGrid</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">pyvista</span><span class="o">.</span><span class="n">UnstructuredGrid</span><span class="p">):</span>
        <span class="n">mesh</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">cast_to_unstructured_grid</span><span class="p">()</span>

    <span class="c1"># Copy useful arrays to avoid repeated calls to properties</span>
    <span class="n">vtk_offset</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">offset</span>
    <span class="n">vtk_cells</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">cells</span>
    <span class="n">vtk_cell_type</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">celltypes</span>

    <span class="c1"># Check that meshio supports all cell types in input mesh</span>
    <span class="n">pixel_voxel</span> <span class="o">=</span> <span class="p">{</span><span class="mi">8</span><span class="p">,</span> <span class="mi">11</span><span class="p">}</span>  <span class="c1"># Handle pixels and voxels</span>
    <span class="k">for</span> <span class="n">cell_type</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">vtk_cell_type</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">cell_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vtk_to_meshio_type</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="ow">and</span> <span class="n">cell_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pixel_voxel</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;meshio does not support VTK type </span><span class="si">{</span><span class="n">cell_type</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="c1"># Get cells</span>
    <span class="n">cells</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">c</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">offset</span><span class="p">,</span> <span class="n">cell_type</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">vtk_offset</span><span class="p">,</span> <span class="n">vtk_cell_type</span><span class="p">):</span>
        <span class="n">numnodes</span> <span class="o">=</span> <span class="n">vtk_cells</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="n">c</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">_vtk</span><span class="o">.</span><span class="n">VTK9</span><span class="p">:</span>  <span class="c1"># must offset by cell count</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="n">vtk_cells</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">c</span> <span class="p">:</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">c</span> <span class="o">+</span> <span class="n">numnodes</span><span class="p">]</span>
            <span class="n">c</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cell</span> <span class="o">=</span> <span class="n">vtk_cells</span><span class="p">[</span><span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span> <span class="p">:</span> <span class="n">offset</span> <span class="o">+</span> <span class="mi">1</span> <span class="o">+</span> <span class="n">numnodes</span><span class="p">]</span>
        <span class="n">cell</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">cell</span>
            <span class="k">if</span> <span class="n">cell_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pixel_voxel</span>
            <span class="k">else</span> <span class="n">cell</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">]]</span>
            <span class="k">if</span> <span class="n">cell_type</span> <span class="o">==</span> <span class="mi">8</span>
            <span class="k">else</span> <span class="n">cell</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">6</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="n">cell_type</span> <span class="o">=</span> <span class="n">cell_type</span> <span class="k">if</span> <span class="n">cell_type</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">pixel_voxel</span> <span class="k">else</span> <span class="n">cell_type</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="n">cell_type</span> <span class="o">=</span> <span class="n">vtk_to_meshio_type</span><span class="p">[</span><span class="n">cell_type</span><span class="p">]</span> <span class="k">if</span> <span class="n">cell_type</span> <span class="o">!=</span> <span class="mi">7</span> <span class="k">else</span> <span class="sa">f</span><span class="s2">&quot;polygon</span><span class="si">{</span><span class="n">numnodes</span><span class="si">}</span><span class="s2">&quot;</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">cells</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">cells</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="n">cell_type</span><span class="p">:</span>
            <span class="n">cells</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">cell</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">cells</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">cell_type</span><span class="p">,</span> <span class="p">[</span><span class="n">cell</span><span class="p">]))</span>

    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">c</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cells</span><span class="p">):</span>
        <span class="n">cells</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>

    <span class="c1"># Get point data</span>
    <span class="n">point_data</span> <span class="o">=</span> <span class="p">{</span><span class="n">k</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">):</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">mesh</span><span class="o">.</span><span class="n">point_data</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>

    <span class="c1"># Get cell data</span>
    <span class="n">vtk_cell_data</span> <span class="o">=</span> <span class="n">mesh</span><span class="o">.</span><span class="n">cell_data</span>
    <span class="n">n_cells</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cumsum</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">c</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cells</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]])</span>
    <span class="n">cell_data</span> <span class="o">=</span> <span class="p">(</span>
        <span class="p">{</span><span class="n">k</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">,</span> <span class="s2">&quot;_&quot;</span><span class="p">):</span> <span class="n">np</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">n_cells</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">vtk_cell_data</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
        <span class="k">if</span> <span class="n">vtk_cell_data</span>
        <span class="k">else</span> <span class="p">{}</span>
    <span class="p">)</span>

    <span class="c1"># Save using meshio</span>
    <span class="n">meshio</span><span class="o">.</span><span class="n">write_points_cells</span><span class="p">(</span>
        <span class="n">filename</span><span class="o">=</span><span class="n">filename</span><span class="p">,</span>
        <span class="n">points</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">mesh</span><span class="o">.</span><span class="n">points</span><span class="p">),</span>
        <span class="n">cells</span><span class="o">=</span><span class="n">cells</span><span class="p">,</span>
        <span class="n">point_data</span><span class="o">=</span><span class="n">point_data</span><span class="p">,</span>
        <span class="n">cell_data</span><span class="o">=</span><span class="n">cell_data</span><span class="p">,</span>
        <span class="n">file_format</span><span class="o">=</span><span class="n">file_format</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span></div>


<span class="k">def</span> <span class="nf">_process_filename</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">expanduser</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">filename</span><span class="p">)))</span>
</pre></div>

              </div>
              
              
          </main>
          

      </div>
    </div>
  
    <script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>
  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2017-2022, The PyVista Developers.<br>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 4.4.0.<br>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>